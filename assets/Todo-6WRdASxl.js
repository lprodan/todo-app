import{r as m,j as e,F as h,k as w,l as A,m as L,n as R,o as T,p as M,q,R as f,t as g,v as $,w as O,x as V,y as z,z as H,A as U}from"./index-t9nJfLhN.js";import{c as X,d as Y,F as k,a as N,E as b,b as v}from"./index.esm-ZoW6x0Nq.js";const y=X().shape({value:Y().min(3,"Too Short!").max(350,"Too Long!").required("Required")});function _(t){const[n,c]=m.useState(!1),r=()=>c(!0),o=()=>c(!1),i=({value:s})=>{var d;(d=t.onEdited)==null||d.call(t,s),o()},l=s=>e.jsx("div",{className:"error edit-mode",children:s});return e.jsx(k,{initialValues:{value:t.value},validationSchema:y,onSubmit:i,children:e.jsxs(N,{className:"list",children:[e.jsx(b,{name:"value",render:l}),e.jsx("div",{className:"date",children:t.date}),e.jsx(v,{className:"checkmark",type:"checkbox",name:"checkbox",onChange:()=>{var s;return(s=t.onCheck)==null?void 0:s.call(t)},checked:t.checked}),e.jsx("div",{className:t.checked&&!n?"list-item checked":"list-item",children:n?e.jsx(v,{name:"value",className:"input input-list-item",type:"text"}):e.jsx("span",{children:t.value})}),!n&&e.jsx("button",{className:"icon edit",title:"Edit",type:"button",onClick:r,children:e.jsx(h,{icon:w})}),n&&e.jsx("button",{className:"icon edit",title:"Save",type:"submit",children:e.jsx(h,{icon:A})}),e.jsx("button",{className:"icon remove",title:n?"exit":"delete",type:n?"button":"reset",onClick:()=>{var s;return n?o():(s=t.onRemove)==null?void 0:s.call(t)},children:e.jsx(h,{icon:L})})]})})}function B({itemsPerPage:t,totalItems:n,paginate:c,currentPage:r}){const o=[],i=Math.ceil(n/t);for(let l=1;l<=i;l++)o.push(l);return e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{onClick:()=>c(1),className:"btn page-item",children:e.jsx(h,{icon:R})}),e.jsx("li",{onClick:()=>c(r-1),className:"btn page-item",children:e.jsx(h,{icon:T})}),o.map(l=>e.jsx("li",{className:`btn page-item ${r===l?"active":""}`,onClick:()=>c(l),children:l},l)),e.jsx("li",{onClick:()=>c(r+1),className:"btn page-item",children:e.jsx(h,{icon:M})}),e.jsx("li",{onClick:()=>c(i),className:"btn page-item",children:e.jsx(h,{icon:q})})]})})}function D({itemsPerPage:t,setItemsPerPage:n}){const c=o=>{n(parseInt(o.target.value,10))},r=()=>{const o=[];for(let i=5;i<=10;i++)o.push(e.jsx("option",{value:i,children:i},i));return o};return e.jsxs("div",{className:"count-items",children:[e.jsx("label",{htmlFor:"itemsPerPage",children:"Show tasks on the page:"}),e.jsx("select",{name:"itemsPerPage",id:"itemsPerPage",value:t,onChange:c,children:r()})]})}function G({list:t}){const[n,c]=m.useState(),[r,o]=m.useState(1),[i,l]=m.useState(5),s=r*i,d=s-i,u=a=>{a>0&&a<=Math.ceil(t.length/i)&&o(a)},C=a=>{l(a)},P=async(a,x)=>{try{await g(a,{value:x})}catch(j){c(j)}},E=async a=>{try{await $(a)}catch(x){c(x)}},I=async(a,x)=>{try{await g(a,{checked:x})}catch(j){c(j)}};n&&setTimeout(()=>{c(void 0)},2e3),m.useEffect(()=>{t.length>0&&d>t.length-1&&o(r-1)},[t,d]);const S=t.slice(d,s),F=()=>n?e.jsxs("h1",{style:{color:"var(--error-color)"},children:[n.message,e.jsx("p",{children:"Help me -_-"})]}):S.map(a=>e.jsx(_,{id:a.id,value:a.value,checked:a.checked,date:a.date,onRemove:()=>E(a.id),onCheck:()=>I(a.id,!a.checked),onEdited:x=>P(a.id,x)},a.id));return e.jsx(f.Fragment,{children:t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(D,{itemsPerPage:i,setItemsPerPage:C}),e.jsx("div",{className:"box-section",children:F()}),e.jsx(B,{itemsPerPage:i,totalItems:t.length,paginate:u,currentPage:r})]}):e.jsx("div",{className:"box-section message",children:"No tasks"})})}function Q(){const[t,n]=m.useState(void 0),[c,r]=m.useState([]);m.useEffect(()=>{const s=O(t,d=>{r(d)});return()=>s()},[t]);const o=s=>e.jsx("div",{className:"error error-list",children:s}),i=async({value:s},{setFieldValue:d})=>{try{await H(s),await d("value","",!1)}catch(u){console.log(u)}},l=async()=>{try{if(confirm("You are going to delete the entire list without the possibility of recovery. Continue?")==!0){const d=c.map(u=>u.id);await U(d)}}catch(s){console.log(s)}};return e.jsxs(f.Fragment,{children:[e.jsx("div",{className:"header",children:"todos"}),e.jsxs("div",{className:"box",children:[e.jsx(k,{initialValues:{value:""},validationSchema:y,onSubmit:i,children:e.jsxs(N,{className:"box-header",children:[e.jsx(b,{name:"value",render:o}),e.jsx(v,{name:"value",className:"input input-list",type:"text",placeholder:"Add to do..."}),e.jsx("button",{className:"icon add",type:"submit",title:"Add",children:e.jsx(h,{icon:V})}),e.jsx("button",{className:"icon clean",type:"button",title:"Clean",onClick:l,children:e.jsx(h,{icon:z})})]})}),e.jsx(G,{list:c}),e.jsxs("div",{className:"box-footer",children:[e.jsx("div",{className:"condition"+(t===void 0?" active":""),onClick:()=>n(void 0),children:"all"}),e.jsx("div",{className:"condition"+(t===!0?" active":""),onClick:()=>n(!0),children:"made"}),e.jsx("div",{className:"condition"+(t===!1?" active":""),onClick:()=>n(!1),children:"to do"})]})]})]})}export{Q as default};
