import{r as m,j as e,F as h,k as F,l as w,m as A,n as L,o as R,p as T,q as M,R as f,t as g,v as q,w as $,x as O,y as V,z,A as H}from"./index-BLkNQ7ZY.js";import{c as U,d as X,F as k,a as N,E as b,b as v}from"./index.esm-BBhzvNy5.js";const p=U().shape({value:X().min(3,"Too Short!").max(350,"Too Long!").required("Required")});function Y(t){const[a,n]=m.useState(!1),r=()=>n(!0),i=()=>n(!1),c=({value:o})=>{t.onEdited?.(o),i()},l=o=>e.jsx("div",{className:"error edit-mode",children:o});return e.jsx(k,{initialValues:{value:t.value},validationSchema:p,onSubmit:c,children:e.jsxs(N,{className:"list",children:[e.jsx(b,{name:"value",render:l}),e.jsx("div",{className:"date",children:t.date}),e.jsx(v,{className:"checkmark",type:"checkbox",name:"checkbox",onChange:()=>t.onCheck?.(),checked:t.checked}),e.jsx("div",{className:t.checked&&!a?"list-item checked":"list-item",children:a?e.jsx(v,{name:"value",className:"input input-list-item",type:"text"}):e.jsx("span",{children:t.value})}),!a&&e.jsx("button",{className:"icon edit",title:"Edit",type:"button",onClick:r,children:e.jsx(h,{icon:F})}),a&&e.jsx("button",{className:"icon edit",title:"Save",type:"submit",children:e.jsx(h,{icon:w})}),e.jsx("button",{className:"icon remove",title:a?"exit":"delete",type:a?"button":"reset",onClick:()=>a?i():t.onRemove?.(),children:e.jsx(h,{icon:A})})]})})}function _({itemsPerPage:t,totalItems:a,paginate:n,currentPage:r}){const i=[],c=Math.ceil(a/t);for(let l=1;l<=c;l++)i.push(l);return e.jsx("nav",{children:e.jsxs("ul",{className:"pagination",children:[e.jsx("li",{onClick:()=>n(1),className:"btn page-item",children:e.jsx(h,{icon:L})}),e.jsx("li",{onClick:()=>n(r-1),className:"btn page-item",children:e.jsx(h,{icon:R})}),i.map(l=>e.jsx("li",{className:`btn page-item ${r===l?"active":""}`,onClick:()=>n(l),children:l},l)),e.jsx("li",{onClick:()=>n(r+1),className:"btn page-item",children:e.jsx(h,{icon:T})}),e.jsx("li",{onClick:()=>n(c),className:"btn page-item",children:e.jsx(h,{icon:M})})]})})}function B({itemsPerPage:t,setItemsPerPage:a}){const n=i=>{a(parseInt(i.target.value,10))},r=()=>{const i=[];for(let c=5;c<=10;c++)i.push(e.jsx("option",{value:c,children:c},c));return i};return e.jsxs("div",{className:"count-items",children:[e.jsx("label",{htmlFor:"itemsPerPage",children:"Show tasks on the page:"}),e.jsx("select",{name:"itemsPerPage",id:"itemsPerPage",value:t,onChange:n,children:r()})]})}function D({list:t}){const[a,n]=m.useState(),[r,i]=m.useState(1),[c,l]=m.useState(5),o=r*c,d=o-c,u=s=>{s>0&&s<=Math.ceil(t.length/c)&&i(s)},y=s=>{l(s)},C=async(s,x)=>{try{await g(s,{value:x})}catch(j){n(j)}},P=async s=>{try{await q(s)}catch(x){n(x)}},E=async(s,x)=>{try{await g(s,{checked:x})}catch(j){n(j)}};a&&setTimeout(()=>{n(void 0)},2e3),m.useEffect(()=>{t.length>0&&d>t.length-1&&i(r-1)},[t,d]);const I=t.slice(d,o),S=()=>a?e.jsxs("h1",{style:{color:"var(--error-color)"},children:[a.message,e.jsx("p",{children:"Help me -_-"})]}):I.map(s=>e.jsx(Y,{id:s.id,value:s.value,checked:s.checked,date:s.date,onRemove:()=>P(s.id),onCheck:()=>E(s.id,!s.checked),onEdited:x=>C(s.id,x)},s.id));return e.jsx(f.Fragment,{children:t.length>0?e.jsxs(e.Fragment,{children:[e.jsx(B,{itemsPerPage:c,setItemsPerPage:y}),e.jsx("div",{className:"box-section",children:S()}),e.jsx(_,{itemsPerPage:c,totalItems:t.length,paginate:u,currentPage:r})]}):e.jsx("div",{className:"box-section message",children:"No tasks"})})}function K(){const[t,a]=m.useState(void 0),[n,r]=m.useState([]);m.useEffect(()=>{const o=$(t,d=>{r(d)});return()=>o()},[t]);const i=o=>e.jsx("div",{className:"error error-list",children:o}),c=async({value:o},{setFieldValue:d})=>{try{await z(o),await d("value","",!1)}catch(u){console.log(u)}},l=async()=>{try{if(confirm("You are going to delete the entire list without the possibility of recovery. Continue?")==!0){const d=n.map(u=>u.id);await H(d)}}catch(o){console.log(o)}};return e.jsxs(f.Fragment,{children:[e.jsx("div",{className:"header",children:"todos"}),e.jsxs("div",{className:"box",children:[e.jsx(k,{initialValues:{value:""},validationSchema:p,onSubmit:c,children:e.jsxs(N,{className:"box-header",children:[e.jsx(b,{name:"value",render:i}),e.jsx(v,{name:"value",className:"input input-list",type:"text",placeholder:"Add to do..."}),e.jsx("button",{className:"icon add",type:"submit",title:"Add",children:e.jsx(h,{icon:O})}),e.jsx("button",{className:"icon clean",type:"button",title:"Clean",onClick:l,children:e.jsx(h,{icon:V})})]})}),e.jsx(D,{list:n}),e.jsxs("div",{className:"box-footer",children:[e.jsx("div",{className:"condition"+(t===void 0?" active":""),onClick:()=>a(void 0),children:"all"}),e.jsx("div",{className:"condition"+(t===!0?" active":""),onClick:()=>a(!0),children:"made"}),e.jsx("div",{className:"condition"+(t===!1?" active":""),onClick:()=>a(!1),children:"to do"})]})]})]})}export{K as default};
